package utils;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.UUID;

public class FileUploadUtil
{
	private File file;
	private String folder;
	private String contentType;
	private String fileName;

	public FileUploadUtil(File file, String folder, String contentType, String fileName)
	{
		this.file = file;
		this.folder = folder;
		this.contentType = contentType;
		this.fileName = fileName;
	}

	public void save()
	{
		if (!StringUtils.isTheSame("image/bmp", this.contentType)
				&& !StringUtils.isTheSame("image/gif", this.contentType)
				&& !StringUtils.isTheSame("image/jpg", this.contentType)
				&& !StringUtils.isTheSame("image/png", this.contentType))
		{
			System.out.println("不支持的文件类型!");
			return;
		}
		
		try
		{
			InputStream is = new FileInputStream(this.file);
			OutputStream os = new FileOutputStream(this.folder + this.generateName());
			byte[] buffer = new byte[1024];
			int len = -1;
			whlie((len = is.read(buffer)) > -1)
			{
				os.write(buffer,0,len);
			}
			is.close();
			os.close();
		}catch(Exception e)
		{
			e.printStackTrace();
		}
	}

	private String generateName()
	{
		return UUID.randomUUID() + this.fileName.substring(this.fileName.lastIndexOf("."));
	}
}
