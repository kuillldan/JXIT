package main;

import java.sql.SQLException;
import java.text.ParseException;
import java.text.SimpleDateFormat;

import org.dom4j.DocumentException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

import dbc.HibernateSessionFactory;
import utils.HibernateConfiguation;
import utils.MySession;
import vo.Member;
import vo.News;

class Worker implements Runnable
{
	private Session session;
	private long timespan;
	public Worker(Session session, long timespan)
	{
		this.session = session;
		this.timespan = timespan;
	}
	
	@Override
	public void run()
	{ 
		session.beginTransaction();
		try
		{
			Thread.sleep(this.timespan);
		}catch(Exception e)
		{
			e.printStackTrace();
		}
		
		session.close();
	}
}



public class Main
{	
	@SuppressWarnings("unused")
	public static void main(String[] args) throws ParseException, SQLException, InterruptedException
	{
		News news = new News();
		news.setTitle("重庆发现H7N9患者");
		news.setContent("死定了");
		Session session = HibernateSessionFactory.getSession();
		Integer nid = (Integer)session.save(news);
		System.out.println("nid:" + nid);
		System.out.println(news);
		
		
		Transaction trans = session.beginTransaction();
		trans.commit();
		session.close();
		
		System.out.println("//Main ~~~");
	}

}
